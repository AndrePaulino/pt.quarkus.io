# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2023-10-01 08:10+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: YAML Front Matter: author
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:1
#, fuzzy, no-wrap
msgid "cescoffier"
msgstr "cescoffier"

#. type: YAML Front Matter: date
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:1
#, fuzzy, no-wrap
msgid "2023-09-25"
msgstr "2023-09-25"

#. type: YAML Front Matter: layout
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:1
#, fuzzy, no-wrap
msgid "post"
msgstr "postagem"

#. type: YAML Front Matter: synopsis
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:1
#, fuzzy, no-wrap
msgid "Describe how you can implement a CRUD / RESTFul application using virtual threads and Quarkus."
msgstr "Descreva como você pode implementar um aplicativo CRUD / RESTFul usando threads virtuais e o Quarkus."

#. type: YAML Front Matter: tags
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:1
#, fuzzy, no-wrap
msgid "virtual-threads reactive crud database"
msgstr "banco de dados de crud reativo de virtual-threads"

#. type: YAML Front Matter: title
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:1
#, fuzzy, no-wrap
msgid "Writing CRUD applications using virtual threads"
msgstr "Criação de aplicativos CRUD usando threads virtuais"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:12
#, fuzzy
msgid "Last week, we published a video demonstrating the creation of a CRUD application using virtual threads in Quarkus. It's as simple as adding the `@RunOnVirtualThread` annotation on your HTTP resource (or your controller class if you use the Spring compatibility layer)."
msgstr "Na semana passada, publicamos um vídeo demonstrando a criação de um aplicativo CRUD usando threads virtuais no Quarkus. É tão simples quanto adicionar a anotação `@RunOnVirtualThread` em seu recurso HTTP (ou em sua classe de controlador, se você usar a camada de compatibilidade do Spring)."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:16
#, fuzzy
msgid "+++ <iframe style=\"margin-left: auto; margin-right: auto; display: block;\" width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/sJ49s7ctpf8?si=XfBB10eabMzGQCKz\" title=\"Writing CRUD applications using virtual threads\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe> +++"
msgstr "<iframe style=\"margin-left: auto; margin-right: auto; display: block;\" width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/sJ49s7ctpf8?si=XfBB10eabMzGQCKz\" title=\"Writing CRUD applications using virtual threads\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:18
#, fuzzy
msgid "This companion post explains how it works behind the scenes."
msgstr "Esta postagem complementar explica como isso funciona nos bastidores."

#. type: Title ==
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:19
#, fuzzy, no-wrap
msgid "The code"
msgstr "O código"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:22
#, fuzzy
msgid "The application is a simple implementation of the https://todobackend.com/[Todo Backend].  The complete code of this post is available https://github.com/quarkusio/virtual-threads-demos/tree/main/crud-example[here]."
msgstr "O aplicativo é uma implementação simples do  link:https://todobackend.com/[Todo Backend]. O código completo desta postagem está disponível  link:https://github.com/quarkusio/virtual-threads-demos/tree/main/crud-example[aqui]."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:24
#, fuzzy
msgid "The important part is the https://github.com/quarkusio/virtual-threads-demos/blob/main/crud-example/src/main/java/org/acme/crud/TodoResource.java[TodoResource.java]:"
msgstr "A parte importante é o  link:https://github.com/quarkusio/virtual-threads-demos/blob/main/crud-example/src/main/java/org/acme/crud/TodoResource.java[TodoResource.java]:"

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:28
#, no-wrap
msgid "package org.acme.crud;\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:31
#, no-wrap
msgid ""
"import io.quarkus.logging.Log;\n"
"import io.quarkus.panache.common.Sort;\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:40
#, no-wrap
msgid ""
"import io.smallrye.common.annotation.NonBlocking;\n"
"import io.smallrye.common.annotation.RunOnVirtualThread;\n"
"import jakarta.transaction.Transactional;\n"
"import jakarta.validation.Valid;\n"
"import jakarta.ws.rs.*;\n"
"import jakarta.ws.rs.core.Response;\n"
"import jakarta.ws.rs.core.Response.Status;\n"
"import java.util.List;\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:45
#, no-wrap
msgid ""
"@Path(\"/api\")\n"
"@RunOnVirtualThread\n"
"public class TodoResource {\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:52
#, no-wrap
msgid ""
"    /**\n"
"     * Just print on which thread the method is invoked.    \n"
"     */\n"
"    private void log() {\n"
"        Log.infof(\"Called on %s\", Thread.currentThread());\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:58
#, no-wrap
msgid ""
"    @GET\n"
"    public List<Todo> getAll() {\n"
"        log();\n"
"        return Todo.listAll(Sort.by(\"order\"));\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:70
#, no-wrap
msgid ""
"    @GET\n"
"    @Path(\"/{id}\")\n"
"    public Todo getOne(@PathParam(\"id\") Long id) {\n"
"        log();\n"
"        Todo entity = Todo.findById(id);\n"
"        if (entity == null) {\n"
"            throw new WebApplicationException(\"Todo with id of \" + id + \" does not exist.\", \n"
"                Status.NOT_FOUND);\n"
"        }\n"
"        return entity;\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:78
#, no-wrap
msgid ""
"    @POST\n"
"    @Transactional\n"
"    public Response create(@Valid Todo item) {\n"
"        log();\n"
"        item.persist();\n"
"        return Response.status(Status.CREATED).entity(item).build();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:92
#, no-wrap
msgid ""
"    @PATCH\n"
"    @Path(\"/{id}\")\n"
"    @Transactional\n"
"    public Response update(@Valid Todo todo, @PathParam(\"id\") Long id) {\n"
"        log();\n"
"        Todo entity = Todo.findById(id);\n"
"        entity.id = id;\n"
"        entity.completed = todo.completed;\n"
"        entity.order = todo.order;\n"
"        entity.title = todo.title;\n"
"        entity.url = todo.url;\n"
"        return Response.ok(entity).build();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:100
#, no-wrap
msgid ""
"    @DELETE\n"
"    @Transactional\n"
"    public Response deleteCompleted() {\n"
"        log();\n"
"        Todo.deleteCompleted();\n"
"        return Response.noContent().build();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:114
#, no-wrap
msgid ""
"    @DELETE\n"
"    @Transactional\n"
"    @Path(\"/{id}\")\n"
"    public Response deleteOne(@PathParam(\"id\") Long id) {\n"
"        log();\n"
"        Todo entity = Todo.findById(id);\n"
"        if (entity == null) {\n"
"            throw new WebApplicationException(\"Todo with id of \" + id + \" does not exist.\", \n"
"                Status.NOT_FOUND);\n"
"        }\n"
"        entity.delete();\n"
"        return Response.noContent().build();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:116
#, no-wrap
msgid "}\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:119
#, fuzzy
msgid "The application uses:"
msgstr "O aplicativo usa:"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:121
#, fuzzy
msgid "RESTEasy Reactive - the recommended REST stack for Quarkus. It supports virtual threads."
msgstr "RESTEasy Reactive - a pilha REST recomendada para o Quarkus. Oferece suporte a threads virtuais."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:122
#, fuzzy
msgid "Hibernate Validation - to validate the Todos created by the user."
msgstr "Validação do Hibernate - para validar os Todos criados pelo usuário."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:123
#, fuzzy
msgid "Hibernate ORM with Panache - to interact with the database."
msgstr "Hibernate ORM com Panache - para interagir com o banco de dados."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:124
#, fuzzy
msgid "The Argroal connection pool - to manage and recycle database connections."
msgstr "O pool de conexões Argroal - para gerenciar e reciclar conexões de banco de dados."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:125
#, fuzzy
msgid "The Narayana transaction manager - to run our code inside transactions."
msgstr "O gerenciador de transações Narayana - para executar nosso código dentro de transações."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:126
#, fuzzy
msgid "The PostgreSQL driver - as we use a PostgreSQL database"
msgstr "O driver PostgreSQL - como usamos um banco de dados PostgreSQL"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:130
#, fuzzy
msgid "The code is similar to a regular implementation of a CRUD service with Quarkus, except for https://github.com/quarkusio/virtual-threads-demos/blob/main/crud-example/src/main/java/org/acme/crud/TodoResource.java#L22[one line].  We added the `@RunOnVirtualThread` annotation on the resource class (line 17).  It instructs Quarkus to invoke these methods on virtual threads instead of regular platform threads (learn more about the difference in the https://quarkus.io/blog/virtual-thread-1/[previous blog post]), including `@Transactional` methods."
msgstr "O código é semelhante a uma implementação normal de um serviço CRUD com o Quarkus, exceto por  link:https://github.com/quarkusio/virtual-threads-demos/blob/main/crud-example/src/main/java/org/acme/crud/TodoResource.java#L22[uma linha]. Adicionamos a anotação `@RunOnVirtualThread` na classe de recurso (linha 17). Ela instrui o Quarkus a invocar esses métodos em threads virtuais em vez de threads regulares da plataforma (saiba mais sobre a diferença na  link:https://quarkus.io/blog/virtual-thread-1/[postagem anterior do blog]), incluindo os métodos `@Transactional`."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:132
#, fuzzy
msgid "### The threading model"
msgstr "O modelo de rosqueamento"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:137
#, fuzzy
msgid "As we have seen in the code, the development model is synchronous.  The interactions with the database uses blocking APIs: you wait for the replies.  That's where virtual thread introduces their magic.  Instead of blocking a platform thread, it only blocks the virtual threads:"
msgstr "Como vimos no código, o modelo de desenvolvimento é síncrono. As interações com o banco de dados usam APIs de bloqueio: você espera pelas respostas. É aí que a thread virtual introduz sua mágica. Em vez de bloquear um thread de plataforma, ele bloqueia apenas os threads virtuais:"

#. type: Positional ($1) AttributeList argument for macro 'image'
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:138
#, fuzzy, no-wrap
msgid "Threading model of the application"
msgstr "Modelo de threading do aplicativo"

#. type: Target for macro image
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:138
#, no-wrap
msgid "crud-database.png"
msgstr ""

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:143
#, fuzzy
msgid "Thus, when another request comes, the carrier thread can handle it.  It radically reduces the number of platform threads required when there are many concurrent requests.  As a result, the number of worker threads, generally used when using a synchronous and blocking development model, is not the bottleneck anymore."
msgstr "Assim, quando outra solicitação chega, o thread de suporte pode lidar com ela. Isso reduz radicalmente o número de threads de plataforma necessários quando há muitas solicitações simultâneas. Como resultado, o número de threads de trabalho, geralmente usado quando se utiliza um modelo de desenvolvimento síncrono e de bloqueio, não é mais o gargalo."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:150
#, fuzzy
msgid "However, that's not because you use virtual threads that your application has no more concurrency limit.  There is a new bottleneck: the **database connection pool**.  When you interact with the database, you ask for a connection to the connection pool (Agroal in our case).  The number of connections is not infinite (20 by default).  Once all the connections are used, you must wait until another processing completes and releases its connection.  You can still handle many requests concurrently, but they will wait for database connections to be available, reducing the response time."
msgstr "No entanto, não é porque você usa threads virtuais que seu aplicativo não tem mais limite de simultaneidade. Há um novo gargalo: o *pool de conexões do banco de dados*. Ao interagir com o banco de dados, você solicita uma conexão com o pool de conexões (Agroal, no nosso caso). O número de conexões não é infinito (20 por padrão). Quando todas as conexões forem usadas, você deverá aguardar até que outro processamento seja concluído e libere sua conexão. Você ainda pode lidar com muitas solicitações ao mesmo tempo, mas elas aguardarão a disponibilidade das conexões do banco de dados, reduzindo o tempo de resposta."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:152
#, fuzzy
msgid "### A note about pinning"
msgstr "Uma observação sobre fixação"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:155
#, fuzzy
msgid "As the https://quarkus.io/blog/virtual-thread-1/[previous blog post] described, pinning happens when the virtual thread cannot be unmounted from the carrier thread.  In this case, blocking the virtual thread also blocks the carrier thread:"
msgstr "Conforme descrito na  link:https://quarkus.io/blog/virtual-thread-1/[postagem anterior do blog], a fixação ocorre quando o thread virtual não pode ser desmontado do thread de transporte. Nesse caso, o bloqueio do thread virtual também bloqueia o thread de transporte:"

#. type: Positional ($1) AttributeList argument for macro 'image'
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:156
#, fuzzy, no-wrap
msgid "Pinning of the carrier thread"
msgstr "Fixação da rosca transportadora"

#. type: Target for macro image
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:156
#, no-wrap
msgid "pinning.png"
msgstr ""

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:163
#, fuzzy
msgid "Fortunately, in this application, there is no pinning.  The PostgreSQL driver is one of the only JDBC drivers that does not pin.  If you plan to use another database, check first.  We will be discussing how to detect pinning in the next post.  Quarkus, Narayana and Hibernate have been patched to avoid the pinning."
msgstr "Felizmente, nesse aplicativo, não há fixação. O driver do PostgreSQL é um dos únicos drivers JDBC que não fixam. Se você planeja usar outro banco de dados, verifique primeiro. Discutiremos como detectar a fixação na próxima postagem. O Quarkus, o Narayana e o Hibernate foram corrigidos para evitar a fixação."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:167
#, fuzzy
msgid "Pinning is one of many problems that can arise.  The application will suffer from the default object pooling mechanism used by Jackson.  Fortunately, we contributed an SPI to https://github.com/FasterXML/jackson-core/pull/1064[Jackson] that will allow us to remove this allocation hog."
msgstr "A fixação é um dos muitos problemas que podem surgir. O aplicativo sofrerá com o mecanismo padrão de pooling de objetos usado pela Jackson. Felizmente, contribuímos com um SPI para a  link:https://github.com/FasterXML/jackson-core/pull/1064[Jackson] que nos permitirá remover esse problema de alocação."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:169
#, fuzzy
msgid "## Conclusion"
msgstr "Conclusão"

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:173
#, fuzzy
msgid "This post explains implementing a CRUD application using virtual threads in Quarkus.  You can now use an imperative development model without compromising the application's concurrency.  It's as simple as using RESTEasy Reactive and adding one annotation: `@RunOnVirtualThread` on your resource."
msgstr "Este post explica a implementação de um aplicativo CRUD usando threads virtuais no Quarkus. Agora você pode usar um modelo de desenvolvimento imperativo sem comprometer a simultaneidade do aplicativo. É tão simples quanto usar o RESTEasy Reactive e adicionar uma anotação: `@RunOnVirtualThread` em seu recurso."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:176
#, fuzzy
msgid "We tailored Quarkus and upstream projects (such as Hibernate, Narayana, SmallRye Mutiny, etc.) to become virtual-thread-friendly.  As we will see in other posts, most Quarkus extensions are ready to be used with virtual threads."
msgstr "Adaptamos o Quarkus e os projetos upstream (como Hibernate, Narayana, SmallRye Mutiny etc.) para se tornarem compatíveis com threads virtuais. Como veremos em outros posts, a maioria das extensões do Quarkus está pronta para ser usada com threads virtuais."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:178
#, fuzzy
msgid "That said, while virtual threads increase the concurrency, you will likely hit other bottlenecks, such as the number of database connections managed in the pool."
msgstr "Dito isso, embora os threads virtuais aumentem a simultaneidade, você provavelmente atingirá outros gargalos, como o número de conexões de banco de dados gerenciadas no pool."

#. type: Plain text
#: upstream/_posts/2023-09-23-virtual-threads-2.adoc:180
#, fuzzy
msgid "In the next post and video, we will see how to test our application and detect pinning."
msgstr "Na próxima publicação e no próximo vídeo, veremos como testar nosso aplicativo e detectar a fixação."
